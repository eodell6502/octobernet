<!doctype html>
<html lang="us">
<head>  <meta charset="utf-8">
<title>OctoberNet: Sysop Control Panel</title>
<style type="text/css">

div.shown  { display: block; }
div.hidden { display: none; }

</style>
<script src="js/jquery-3.6.3.min.js"></script>
<!-- <script src="js/GQuery.js"></script> -->
<script type="module">
import GQuery from "./js/GQuery.mjs";
var apiUrl = "http://192.168.1.140/on";

console.log("loginToken =", localStorage.loginToken);

$(document).ready(function() {
    $("#logoutLink").on("click", logout);
    $("#usersLink").on("click", () => { xBlock("panel", "usersPanel"); });
    $("#forumsLink").on("click", () => { xBlock("panel", "forumsPanel"); });
    $("#hostsLink").on("click", () => { xBlock("panel", "hostsPanel"); });
    $("#configLink").on("click", () => { xBlock("panel", "configPanel"); });
});


//==============================================================================

function xBlock(classname, id) {
    $("." + classname).addClass("hidden");
    $("#" + id).removeClass("hidden");
}

//==============================================================================

async function logout() {
    var g = new GQuery(apiUrl);
    var res = await g.req("userLogout", { _loginToken: localStorage.loginToken } );
    localStorage.clear();
    window.location = "index.html";
}



</script>
</head><body>
<h1>Sysop Control Panel</h1>

<p>
    <span id="usersLink">Users</span> |
    <span id="forumsLink">Forums</span> |
    <span id="hostsLink">Hosts</span> |
    <span id="configLink">Config</span> |
    <span id="logoutLink">Log Out</span>
</p>

<!-- User Editor -->

<div class="panel" id="usersPanel">
    <h2>User Manager</h2>
</div>

<!-- Forum Editor -->

<div class="panel hidden" id="forumsPanel">
    <h2>Forum Manager</h2>
</div>

<!-- Hosts Viewer -->

<div class="panel hidden" id="hostsPanel">
    <h2>Hosts Viewer</h2>
</div>

<!-- System Config -->

<div class="panel hidden" id="configPanel">
    <h2>System Configuration</h2>
</div>


</body>
</html>
